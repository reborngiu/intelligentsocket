<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Cache-Control" content="no-transform" /> 
    <meta http-equiv="Cache-Control" content="no-siteapp" />
	<title>智能插座</title>
    <link rel="stylesheet" type="text/css" href='css/smartPowerPlug2.css'>
</head>

<script type="text/javascript">

function changeImage()
{
	var element=document.getElementById("main_startpower_myimage");	

	if (element.src.match("startpower"))
	{
		element.src="http://r.photo.store.qq.com/psb?/V13oOavi4OWdbk/FbWEaaesDm3Lu.gmEh5kjIS9LB6BwxeehHbGY2*XH3A!/r/dG0BAAAAAAAA";

		var x=document.getElementById("index_main_toclip");  //查找元素
		x.innerHTML="单击按钮结束充电";    //改变内容
		
		var y=document.getElementById("index_main_content_cost");  //查找元素
		y.innerHTML="总费用： 6.10 元";    //改变内容	
	

	}
	else
	{
		element.src="http://r.photo.store.qq.com/psb?/V13oOavi4OWdbk/tz3TRe*FcO24xxvYvSGygjt6uPL2L9koCl2ojij*6TY!/r/dDwBAAAAAAAA";

		var parent=document.getElementById("main_startpower"); //查找父元素
		x=document.getElementById("index_main_toclip");		
		parent.removeChild(x);					//移除元素

		y=document.getElementById("index_main_content_cost")  //查找元素		
		y.innerHTML="总电量：10.00 KWh<br/><br/>总费用： 6.10 元"    //改变内容
		
	}
}

function initiate(){
  var get = document.getElementById('getlocation');
  get.addEventListener('click', getlocation);
}
function getlocation(){
  navigator.geolocation.getCurrentPosition(showinfo, showerror);
}
function showinfo(position){
  var location = document.getElementById('location');
  var mapurl = 'http://maps.google.com/maps/api/staticmap?center=' + position.coords.latitude + ',' + position.coords.longitude + '&zoom=12&size=400x400&sensor=false&markers=' + position.coords.latitude + ',' + position.coords.longitude;
  location.innerHTML = '<img src="' + mapurl + '">';
}
function showerror(error){
  alert('Error: ' + error.code + ' ' + error.message);
}
addEventListener('load', initiate);

</script>

<body>
    <div class="index">
		<div class="header">
			<div class="header_content">
				智能插座              
                <img id="header_scan" src="http://r.photo.store.qq.com/psb?/V13oOavi4OWdbk/WyaOEe6*pfIypt4nb0*M7xPkI*ZoBLLnVPOTje*poww!/r/dIUBAAAAAAAA">
            </div>
    </div> 
       <div id="location">
            <button id="getlocation">获取位置</button> 
		</div>
        <div class="main">
			<div id="main_startpower">
  			<form id="form1" name="form1" method="post" action="data.html">
			<img id="main_startpower_myimage" onClick="changeImage()" src="http://r.photo.store.qq.com/psb?/V13oOavi4OWdbk/0FH9tO3Gz9tEAqsHF*7s49JmoWOqriW0dgzg9WHxCuc!/r/dIUBAAAAAAAA">
  			</form>
			<p id="index_main_toclip" style="font-size:20px;color:#C0C0C0">单击按钮开始充电</p>	
			<p id="index_main_content_cost" style="font-size:25px;color:#1E90FF"></p>
			</div>
		</div>
		<div id="bottom"> 
			<ul>
				<li id="nearbyPlug"><a href="nearbyPlugPage.html">附近插座</a></li>
				<li id="power"><a href="index.html" style="border-top:3px solid #1E90FF">电量查询</a></li>
				<li id="history"><a href="historyPage.html">历史记录</a></li>
			</ul>	
		</div>
</div>
</body>
</html>